<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>HD BRUTAL - Dimzz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; font-family: 'Orbitron', sans-serif; }
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: linear-gradient(270deg, #0f172a, #1e293b, #0f172a);
      background-size: 600% 600%;
      animation: backgroundScroll 20s ease infinite;
      color: white; display: flex; justify-content: center; align-items: center;
    }
    @keyframes backgroundScroll {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .login-container, .app-container {
      position: relative; padding: 30px; border-radius: 20px;
      max-width: 400px; width: 90%; text-align: center;
      animation: bounceIn 1s ease;
      background-size: cover;
      background-position: center;
      box-shadow: 0 0 25px #ef4444aa;
      overflow: hidden;
    }
    .login-container {
      background-image:
        linear-gradient(270deg, rgba(15,23,42,0.9), rgba(30,41,59,0.9)),
        url('https://files.catbox.moe/5gh766.jpg');
    }
    .app-container {
      background-image:
        linear-gradient(270deg, rgba(15,23,42,0.8), rgba(30,41,59,0.8)),
        url('https://files.catbox.moe/8hr7tv.jpg');
    }
    @keyframes bounceIn {
      0% { transform: translateY(100px); opacity: 0; }
      60% { transform: translateY(-10px); opacity: 1; }
      100% { transform: translateY(0); }
    }
    h2 {
      color: #f43f5e;
      text-shadow: 0 0 10px #f43f5e80;
    }
    input, button, select {
      width: 100%; padding: 12px; margin: 10px 0;
      border-radius: 10px; border: none;
      background: #1e293b; color: white;
    }
    button {
      background: #ef4444;
      cursor: pointer;
    }
    canvas { display: none; }
    #preview {
      margin-top: 20px;
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 0 20px #f43f5e66;
      opacity: 0;
      transform: translateY(30px);
      transition: 1s;
    }
    .hidden { display: none; }

    /* === LOADING PERSENTASE === */
    #loading {
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: .3s;
    }
    #loading.active {
      opacity: 1;
      pointer-events: auto;
    }
    .loading-box {
      text-align: center;
      color: #f43f5e;
      text-shadow: 0 0 10px #f43f5e;
    }
    .loading-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 6px solid #1e293b;
      border-top: 6px solid #ef4444;
      animation: spin 1s linear infinite;
      margin: auto;
      box-shadow: 0 0 25px #ef4444;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .loading-percent {
      margin-top: 15px;
      font-size: 18px;
      letter-spacing: 2px;
    }
  </style>
</head>

<body>

<!-- AUDIO TETAP ADA -->
<audio id="loginAudio" autoplay loop>
  <source src="https://files.catbox.moe/7f5sm9.mp4" type="audio/mp4">
</audio>

<audio id="mainAudio" loop class="hidden">
  <source src="https://files.catbox.moe/ols6p0.mp4" type="audio/mp4">
</audio>

<div class="login-container" id="loginPage">
  <h2>Login HD BRUTAL</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Masuk</button>
</div>

<div class="app-container hidden" id="appPage">
  <h2>HD BRUTAL GELAP - Dimzz</h2>
  <input type="file" accept="image/*" id="inputImage">
  <select id="effectSelect">
    <option value="brighten">âœ¨ Mencerahkan</option>
    <option value="efiko">ðŸŒˆ Efiko</option>
    <option value="smooth">ðŸ’† Halus</option>
    <option value="brutal">ðŸ”¥ HD Brutal</option>
    <option value="capcut">ðŸŽ¬ CapCut</option>
    <option value="hdpremium">ðŸ’  HD Premium</option>
  </select>
  <button onclick="enhanceImage()">Proses HD Anime Style</button>
  <button onclick="downloadImage()">Unduh Gambar HD</button>
  <canvas id="canvas"></canvas>
  <img id="preview">
</div>

<!-- LOADING -->
<div id="loading">
  <div class="loading-box">
    <div class="loading-circle"></div>
    <div class="loading-percent" id="loadingPercent">0%</div>
  </div>
</div>

<script>
window.addEventListener("load", () => {
  loginAudio.play().catch(() => {
    document.body.addEventListener("click", () => loginAudio.play(), { once:true });
  });
});

function login(){
  if(username.value.toUpperCase()==="DIMZZ" && password.value.toUpperCase()==="BRUTAL"){
    loginPage.classList.add("hidden");
    appPage.classList.remove("hidden");
    loginAudio.pause();
    mainAudio.classList.remove("hidden");
    mainAudio.play().catch(() => {
      document.body.addEventListener("click", () => mainAudio.play(), { once:true });
    });
  } else alert("Username atau password salah");
}

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const loading = document.getElementById("loading");
const loadingPercent = document.getElementById("loadingPercent");

function enhanceImage(){
  if(!inputImage.files[0]) return alert("Pilih gambar terlebih dahulu");

  loading.classList.add("active");
  loadingPercent.innerText="0%";

  const reader = new FileReader();
  const img = new Image();

  reader.onload = e => {
    img.onload = () => {
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img,0,0);

      let d = ctx.getImageData(0,0,canvas.width,canvas.height);
      let data = d.data;
      let total = data.length;
      let step = Math.floor(total / 100);
      let progress = 0;

      for(let i=0;i<data.length;i+=4){
        let r=data[i], g=data[i+1], b=data[i+2];
        let ef = effectSelect.value;

        if(ef==="brighten"){r+=20; g+=20; b+=20}
        if(ef==="efiko"){r*=1.4; g*=1.4; b*=1.4}
        if(ef==="brutal"){b*=1.7; g*=1.2}
        if(ef==="capcut"){r*=1.2; g*=1.1}
        if(ef==="hdpremium"){b*=1.6; g*=1.3}

        data[i]=Math.min(255,r);
        data[i+1]=Math.min(255,g);
        data[i+2]=Math.min(255,b);

        if(i % step === 0){
          progress++;
          loadingPercent.innerText = progress + "%";
        }
      }

      ctx.putImageData(d,0,0);
      ctx.filter="contrast(1.3) saturate(1.5)";
      ctx.drawImage(canvas,0,0);
      ctx.filter="none";

      preview.src = canvas.toDataURL("image/png");
      preview.style.opacity="1";
      preview.style.transform="translateY(0)";

      setTimeout(()=>loading.classList.remove("active"),300);
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(inputImage.files[0]);
}

function downloadImage(){
  const a=document.createElement("a");
  a.href=canvas.toDataURL("image/png");
  a.download="HD-Brutal-Dimzz.png";
  a.click();
}
</script>

</body>
</html>